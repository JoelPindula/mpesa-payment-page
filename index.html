<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página de Pagamento M-Pesa</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background-color: #f9f9f9; }
        .container { width: 300px; margin: 0 auto; }
        h1 { font-size: 24px; text-align: center; }
        form { display: flex; flex-direction: column; }
        label { margin-top: 10px; }
        input { margin-bottom: 10px; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
        button { padding: 10px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        #result { margin-top: 20px; text-align: center; }
        #result p { font-size: 18px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Pagar com M-Pesa</h1>
        <form id="paymentForm">
            <label for="transactionReference">Referência da Transação:</label>
            <input type="text" id="transactionReference" required>
            <label for="customerMSISDN">Número M-Pesa:</label>
            <input type="text" id="customerMSISDN" required>
            <label for="amount">Valor:</label>
            <input type="text" id="amount" required>
            <label for="thirdPartyReference">Referência Terceiros:</label>
            <input type="text" id="thirdPartyReference" required>
            <label for="serviceProviderCode">Código do Provedor de Serviço:</label>
            <input type="text" id="serviceProviderCode" required>
            <button type="submit">Pagar</button>
        </form>
        <div id="result"></div>
    </div>
    <script>
        document.getElementById('paymentForm').addEventListener('submit', async function(event) {
            event.preventDefault();

            const transactionReference = document.getElementById('transactionReference').value;
            const customerMSISDN = document.getElementById('customerMSISDN').value;
            const amount = document.getElementById('amount').value;
            const thirdPartyReference = document.getElementById('thirdPartyReference').value;
            const serviceProviderCode = document.getElementById('serviceProviderCode').value;

            const apiKey = "fmn2bwllcy8poyv2g5su1omw8qi9psqv";
            const publicKey = "MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAmptSWqV7cGUUJJhUBxsMLonux24u+FoTlrb+4Kgc6092JIszmI1QUoMohaDDXSVueXx6IXwYGsjjWY32HGXj1iQhkALXfObJ4DqXn5h6E8y5/xQYNAyd5bpN5Z8r892B6toGzZQVB7qtebH4apDjmvTi5FGZVjVYxalyyQkj4uQbbRQjgCkubSi45Xl4CGtLqZztsKssWz3mcKncgTnq3DHGYYEYiKq0xIj100LGbnvNz20Sgqmw/cH+Bua4GJsWYLEqf/h/yiMgiBbxFxsnwZl0im5vXDlwKPw+QnO2fscDhxZFAwV06bgG0oEoWm9FnjMsfvwm0rUNYFlZ+TOtCEhmhtFp+Tsx9jPCuOd5h2emGdSKD8A6jtwhNa7oQ8RtLEEqwAn44orENa1ibOkxMiiiFpmmJkwgZPOG/zMCjXIrrhDWTDUOZaPx/lEQoInJoE2i43VN/HTGCCw8dKQAwg0jsEXau5ixD0GUothqvuX3B9taoeoFAIvUPEq35YulprMM7ThdKodSHvhnwKG82dCsodRwY428kg2xM/UjiTENog4B6zzZfPhMxFlOSFX4MnrqkAS+8Jamhy1GgoHkEMrsT5+/ofjCx0HjKbT5NuA2V/lmzgJLl3jIERadLzuTYnKGWxVJcGLkWXlEPYLbiaKzbJb2sYxt+Kt5OxQqC1MCAwEAAQ==";

            const response = await fetch('https://api.sandbox.vm.co.mz:18352/ipg/v1x/c2bPayment/singleStage/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`,
                    'Origin': 'developer.mpesa.vm.co.mz'
                },
                body: JSON.stringify({
                    input_TransactionReference: transactionReference,
                    input_CustomerMSISDN: customerMSISDN,
                    input_Amount: amount,
                    input_ThirdPartyReference: thirdPartyReference,
                    input_ServiceProviderCode: serviceProviderCode
                })
            });

            const result = await response.json();
            document.getElementById('result').innerHTML = `<p>${result.output_ResponseDesc}</p>`;
        });
    </script>
</body>
</html>
